(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4178],{85940:function(e,t,i){"use strict";let n;i.d(t,{p:function(){return $},r:function(){return Y}});var r=i(85893),o=i(63764),l=i(86010),a=i(68949),s=i(46670),d=i(67294),c=i(67153),u=i(2656),h=i(73033),p=i(54619),m=i(23928),x=i(16765),g=i(40815),f=i.n(g),j=i(75766),v=i(61725),w=i.n(v);class b{attachToModel(e,t){this.debuggers.set(e,t);let i=(0,a.EH)(()=>{this.updateBreakpointDecorations(e,t)});e.onDidChangeAttached(()=>{e.isAttachedToEditor()&&setTimeout(()=>this.updateBreakpointDecorations(e,t),0)}),e.onWillDispose(i)}supportsBreakpoints(e){return e.endsWith(".ino")||e.endsWith(".h")||e.endsWith(".c")||e.endsWith(".cpp")||e.endsWith(".rs")}lineRange(e,t){let i=e.getLineFirstNonWhitespaceColumn(t);return e.validateRange(new this.monacoGlobal.Range(t,i,t,i+1))}updateBreakpointDecorations(e,t){var i;let{OverviewRulerLane:n}=this.monacoGlobal.editor,r=null!==(i=this.modelDecorations.get(e))&&void 0!==i?i:[],{activeLine:o}=t,a=t.breakpoints.map(t=>{let i=o===t.lineNumber;return{range:this.lineRange(e,t.lineNumber),options:{description:"breakpoint-decoration",isWholeLine:!0,glyphMarginClassName:i?(0,l.default)("codicon-debug-stackframe",w().stackframe):(0,l.default)("codicon-debug-breakpoint",w().breakpoint),glyphMarginHoverMessage:{value:"Breakpoint"},overviewRuler:{color:"#6a5aff",position:n.Left}}}});o&&a.push({range:this.lineRange(e,o),options:{description:"debugger-frame-decoration",isWholeLine:!0,className:w().stackframeLine}}),this.modelDecorations.set(e,this.editor.deltaDecorations(r,a))}setBreakpointHintDecoration(e){let{TrackedRangeStickiness:t}=this.monacoGlobal.editor;this.currentHintDecoration=this.editor.deltaDecorations(this.currentHintDecoration,e?[{range:{startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1},options:{glyphMarginClassName:(0,l.default)("codicon-debug-hint",w().hint),stickiness:t.NeverGrowsWhenTypingAtEdges}}]:[])}constructor(e,t){(0,j._)(this,"monacoGlobal",void 0),(0,j._)(this,"editor",void 0),(0,j._)(this,"currentHintDecoration",void 0),(0,j._)(this,"debuggers",void 0),(0,j._)(this,"modelDecorations",void 0),this.monacoGlobal=e,this.editor=t,this.currentHintDecoration=[],this.debuggers=new WeakMap,this.modelDecorations=new WeakMap,t.onMouseMove(i=>{let n=null,r=t.getModel(),{MouseTargetType:o}=e.editor;if(r&&this.debuggers.get(r)&&i.target.position&&(i.target.type===o.GUTTER_GLYPH_MARGIN||i.target.type===o.GUTTER_LINE_NUMBERS)){let e=i.target.detail;e.isAfterLines||(n=i.target.position.lineNumber)}this.setBreakpointHintDecoration(n)}),t.onMouseLeave(()=>{this.setBreakpointHintDecoration(null)}),t.onMouseDown(i=>{let{MouseTargetType:n}=e.editor,r=t.getModel(),o=r?this.debuggers.get(r):null;if(!i.target.position||!o||i.target.type!==n.GUTTER_GLYPH_MARGIN||i.target.detail.isAfterLines)return;let{lineNumber:l}=i.target.position;o.breakpoints.find(e=>e.lineNumber===l)?o.removeBreakpoint(l):o.setBreakpoint(l)})}}var k=i(39355),y=i(51797),Z=i(46761),C=i(72428),S=i(23132),_=i(58703),D=i(46901),M=i(25464),E=i(18972),N=i(48885),W=i(59334),F=i(25854),z=i(3026),P=i(48913),R=i(11057),T=i(50657),B=i(31425),L=i(6514),A=i(37645),H=i(22237);function G(e){let{open:t,validateName:i,onClose:n,onSubmit:o}=e,[l,a]=(0,d.useState)(""),[s,c]=(0,d.useState)(null),u=()=>{s||(l&&o(l),n())};return(0,r.jsx)(T.Z,{open:t,onClose:n,"aria-labelledby":"form-dialog-title",fullWidth:!0,maxWidth:"xs",children:(0,r.jsxs)("form",{onSubmit:e=>{u(),e.preventDefault()},children:[(0,r.jsx)(A.Z,{id:"form-dialog-title",children:"Create a new file"}),(0,r.jsx)(L.Z,{sx:{minHeight:"96px"},children:(0,r.jsx)(H.Z,{autoFocus:!0,margin:"dense",label:"New file name",fullWidth:!0,value:l,onChange:e=>{let{value:t}=e.target;a(t),c(t?i(t):null)},error:null!=s,helperText:s})}),(0,r.jsxs)(B.Z,{children:[(0,r.jsx)(R.Z,{onClick:n,children:"Cancel"}),(0,r.jsx)(R.Z,{onClick:u,color:"primary",variant:"contained",disabled:null!=s,children:"Create"})]})]})})}function I(e){let{open:t,originalName:i,validateName:n,onClose:o,onRename:l}=e,[a,s]=(0,d.useState)(i),[c,u]=(0,d.useState)(null);(0,d.useEffect)(()=>{s(i)},[i]);let h=()=>{c||(a!==i&&l(a),o())};return(0,r.jsx)(T.Z,{open:t,onClose:o,"aria-labelledby":"form-dialog-title",fullWidth:!0,maxWidth:"xs",children:(0,r.jsxs)("form",{onSubmit:e=>{h(),e.preventDefault()},children:[(0,r.jsxs)(A.Z,{id:"form-dialog-title",children:['Rename "',i,'"']}),(0,r.jsx)(L.Z,{sx:{minHeight:"96px"},children:(0,r.jsx)(H.Z,{autoFocus:!0,margin:"dense",label:"New file name",fullWidth:!0,value:a,onChange:e=>{let{value:t}=e.target;s(t),u(t===i?null:n(t))},error:null!=c,helperText:c})}),(0,r.jsxs)(B.Z,{children:[(0,r.jsx)(R.Z,{onClick:o,children:"Cancel"}),(0,r.jsx)(R.Z,{onClick:h,color:"primary",variant:"contained",disabled:null!=c,children:"Rename"})]})]})})}let K=["ino","txt","h","hh","hpp","c","csv","cpp","md","json","S","py","rs","bas","v"],U=["ino","h","hh","hpp","c","cpp"];function O(e){let{activeFile:t,open:i,anchorEl:n,onClose:o,onFileCreated:l}=e,a=(0,P.P)(),s=(0,d.useContext)(Y),[c,u]=(0,d.useState)(!1),[h,p]=(0,d.useState)(!1),[m,x]=(0,d.useState)(!1),[g,f]=(0,d.useState)(""),{translate:j}=(0,F.q)("editor.fileMenu");function v(e){for(let t of'/<>:"\\|?*')if(e.includes(t))return j("error.invalidFileName","Invalid filename: character {{char}} is not allowed.",{char:t});return e.includes(".")&&function(e){let t=e.split(".");return K.includes(t[t.length-1])}(e)||"Cargo.toml"===e?a.files.some(t=>t.name===e)?j("error.fileExists","A file with this name already exists"):null:j("error.invalidFileType","Invalid file type. Supported file types: {{types}}",{types:K.join(", ")})}let w=()=>{u(!0)},b=()=>{p(!0)},R=()=>{confirm(j("confirmDelete","This will remove {{filename}}. Should I go ahead?",{filename:null!=t?t:""}))&&t&&a.removeFile(t)},T=async()=>{let{files:e}=await (0,z.aE)({multiple:!0,accept:K.map(e=>".".concat(e))}),t=[];for(let i of e){let e=v(i.name);null===e?a.addFile(i.name,new TextDecoder().decode(await i.arrayBuffer())):t.push("".concat(i.name,": ").concat(e))}t.length&&alert(j("error.uploadFailed","Some files could not be uploaded")+"\n\n"+t.join("\n"))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.Z,{open:m,autoHideDuration:6e3,onClose:()=>{x(!1)},children:(0,r.jsx)(D.Z,{severity:"success",children:g})}),(0,r.jsxs)(M.Z,{open:i,onClose:o,onClick:o,anchorEl:n,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[t&&function(e){let t=e.split(".");return U.includes(t[t.length-1])}(t)&&(0,r.jsxs)(E.Z,{onClick:async()=>{var e;let t=await (null===(e=s.formatCode)||void 0===e?void 0:e.call(s));x(!0),f(t?j("formatSuccessful","Code formatted successfully"):j("formatAlready","Code already formatted"))},children:[(0,r.jsx)(N.Z,{children:(0,r.jsx)(k.Z,{})}),(0,r.jsx)(W.Z,{primary:j("formatCode","Format code")})]}),t&&(0,r.jsxs)(E.Z,{onClick:b,children:[(0,r.jsx)(N.Z,{children:(0,r.jsx)(y.Z,{fontSize:"small"})}),(0,r.jsx)(W.Z,{children:j("rename","Rename")})]}),t&&(0,r.jsxs)(E.Z,{onClick:R,children:[(0,r.jsx)(N.Z,{children:(0,r.jsx)(Z.Z,{fontSize:"small"})}),(0,r.jsx)(W.Z,{children:j("delete","Delete")})]}),(0,r.jsxs)(E.Z,{onClick:w,children:[(0,r.jsx)(N.Z,{children:(0,r.jsx)(C.Z,{fontSize:"small"})}),(0,r.jsx)(W.Z,{children:j("newFile","New file...")})]}),(0,r.jsxs)(E.Z,{onClick:T,children:[(0,r.jsx)(N.Z,{children:(0,r.jsx)(S.Z,{fontSize:"small"})}),(0,r.jsx)(W.Z,{children:j("uploadFile","Upload file(s)...")})]})]}),(0,r.jsx)(G,{open:c,validateName:v,onClose:()=>u(!1),onSubmit:e=>{a.addFile(e),null==l||l(e)}}),(0,r.jsx)(I,{open:h,originalName:null!=t?t:"",validateName:v,onClose:()=>p(!1),onRename:e=>{t&&a.renameFile(t,e)}})]})}var V=JSON.parse('{"$schema":"http://json-schema.org/schema#","type":"object","required":["version","author","editor","parts","connections"],"properties":{"version":{"enum":[1]},"author":{"type":"string","title":"Author name"},"editor":{"type":"string","title":"Software used to create this file","default":"wokwi","examples":["wokwi"]},"pacman":{"type":"boolean"},"parts":{"type":"array","title":"List of parts","items":{"required":["id","type"],"properties":{"id":{"type":"string"},"type":{"enum":["board-ssd1306","wokwi-74hc165","wokwi-74hc595","wokwi-analog-joystick","wokwi-arduino-nano","wokwi-arduino-mega","wokwi-arduino-uno","wokwi-attiny85","wokwi-buzzer","wokwi-il9163","wokwi-ili9341","wokwi-dht11","wokwi-dht12","wokwi-dht22","wokwi-ds1307","wokwi-franzininho","wokwi-hc-sr04","wokwi-ir-receiver","wokwi-ky-040","wokwi-lcd1602","wokwi-lcd2004","wokwi-led","wokwi-led-bar-graph","wokwi-led-ring","wokwi-logic-analyzer","wokwi-max7219-matrix","wokwi-membrane-keypad","wokwi-microsd-card","wokwi-midi-player","wokwi-mpu6050","wokwi-neopixel","wokwi-neopixel-matrix","wokwi-neopixel-meter","wokwi-neopixel-canvas","wokwi-ntc-temperature-sensor","wokwi-servo","wokwi-tv","wokwi-photoresistor-sensor","wokwi-pi-pico","wokwi-pir-motion-sensor","wokwi-potentiometer","wokwi-pushbutton","wokwi-rgb-led","wokwi-resistor","wokwi-7segment","wokwi-splendida","wokwi-slide-potentiometer","wokwi-slide-switch","wokwi-ssd1306"]},"left":{"type":"number"},"top":{"type":"number"},"rotate":{"type":"number"},"attrs":{"type":"object","additionalProperties":{"type":"string"}},"hide":{"type":"boolean","default":false}},"additionalProperties":false}},"connections":{"type":"array","title":"List of part connections","items":{"type":"array","minItems":3,"maxItems":4,"items":[{"type":"string","title":"From pin","pattern":"^.+:.+$"},{"type":"string","title":"To pin","pattern":"^.+:.+$"},{"type":"string","title":"Wire color","format":"color","examples":["black","red","green"]},{"type":"array","items":{"pattern":"^[vh]-?[0-9]+|\\\\*$","type":"string"}}],"additionalItems":false}},"serialMonitor":{"type":"object","properties":{"display":{"type":"string","enum":["always","never","auto","plotter","terminal"],"default":"auto"},"newline":{"type":"string","enum":["none","lf","cr","crlf"]}}}}}'),q=i(32360);let Y=(0,d.createContext)({ready:!1,commands:{}}),$=(0,s.Pi)(e=>{let{tabs:t,architecture:s}=e,[g,j]=(0,d.useState)(t[0]),v=!t.includes(g),w=v?t[0]:g,k=(0,d.useRef)(w),[y,Z]=(0,d.useState)(null),[C,S]=(0,d.useState)(null),[_,D]=(0,d.useState)(null),M=(0,d.useRef)(_),E=(0,d.useRef)(null),N=(0,d.useContext)(Y),[W,F]=(0,d.useState)(!1),z=(0,d.useRef)(null),P=(0,d.useRef)(null),[R,T]=(0,d.useState)(!1),B=(0,u.A)(),L="1"===(0,c.Z)("wokwi-no-autocomplete"),A=(0,d.useRef)(!1),H=(0,d.useCallback)(()=>{let e=z.current;e&&(e.style.overflow="hidden",null==_||_.layout(),e.style.overflow="")},[_]);N.doLayout=H,(0,h.m)("resize",H),N.goToError=()=>{var e,i;if(null===(e=w.errors)||void 0===e||!e.length){for(let e of t)if(null===(i=e.errors)||void 0===i?void 0:i.length){j(e);return}}},(0,d.useEffect)(()=>(0,a.EH)(()=>{for(let i of t){var e;if(null===(e=i.debugger)||void 0===e?void 0:e.activeLine){j(i);return}}}),[t]),N.formatCode=async()=>{var e;let t=null==_?void 0:_.getValue();await (null===(e=null==_?void 0:_.getAction("editor.action.formatDocument"))||void 0===e?void 0:e.run());let i=null==_?void 0:_.getValue();return t!==i},(0,d.useEffect)(()=>{v&&j(t[0])},[v,t]);let G=(0,d.useCallback)(e=>{var t,i,n;let r=C.Uri.parse("vfs:"+e.name),o=null!==(i=C.editor.getModel(r))&&void 0!==i?i:C.editor.createModel(e.content,function(e,t){let{name:i,content:n}=e,r=i.toLowerCase();return i.endsWith(".chip.c")?"cpp":(0,p.PE)(i)?"arduino":r.endsWith(".json")?"json":r.endsWith(".md")?"markdown":t&&i.endsWith(".S")?"".concat(t,"-assembly"):i.endsWith(".py")?"python":i.endsWith(".rs")?"rust":i.endsWith(".bas")?"basic":i.endsWith(".js")?"javascript":i.endsWith(".ts")?"typescript":i.endsWith(".v")?"verilog":i.endsWith(".toml")?"ini":i===m.rp?n.includes("file format elf32-littlearm")?"arduino-listing-arm":"arduino-listing":"text"}(e,s),r);o.getValue()!==e.content&&o.setValue(e.content),o.onDidChangeContent(()=>{var t;return null===(t=e.update)||void 0===t?void 0:t.call(e,o.getValue())});let l=(0,a.EH)(()=>{var t;let i=M.current,n=(null==i?void 0:i.getModel())===o;C.editor.setModelMarkers(o,"Arduino",function(e,t){let i=t=>{switch(t){case"error":break;case"warning":return e.MarkerSeverity.Warning;case"note":return e.MarkerSeverity.Hint}return e.MarkerSeverity.Error};return t.map(e=>{let{type:t,...n}=e;return{severity:i(t),...n}})}(C,e.errors||[]));let r=null===(t=e.errors)||void 0===t?void 0:t.filter(e=>"note"!==e.type);n&&(null==r?void 0:r.length)&&setTimeout(()=>{var e;null==i||i.trigger(null,"closeMarkersNavigation",[]),null===(e=null==i?void 0:i.getAction("editor.action.marker.next"))||void 0===e||e.run(),null==i||i.trigger(null,"closeMarkersNavigation",[])},0)});o.onWillDispose(l);let d=e.debugger;return d&&(null==E?void 0:null===(t=E.current)||void 0===t?void 0:t.supportsBreakpoints(e.name))&&(null===(n=E.current)||void 0===n||n.attachToModel(o,d)),o},[C,s]),I=e=>{if(D(e),M.current=e,e.updateOptions({tabSize:2}),C){var t;for(let i of(E.current=new b(C,e),N.ready=!0,null===(t=N.onEditorReady)||void 0===t||t.call(N),N.onRunCode&&e.addAction({id:"run-program",label:"Compile & Run Program",keybindings:[C.KeyMod.CtrlCmd|C.KeyCode.Enter,C.KeyMod.CtrlCmd|C.KeyCode.KeyU,C.KeyMod.CtrlCmd|C.KeyCode.KeyR],run:()=>{var e;return null===(e=N.onRunCode)||void 0===e?void 0:e.call(N)}}),N.onSaveCode&&e.addAction({id:"save",label:"Save",keybindings:[C.KeyMod.CtrlCmd|C.KeyCode.KeyS],run:()=>{var e;return null===(e=N.onSaveCode)||void 0===e?void 0:e.call(N)}}),Object.keys(N.commands))){let{name:t,keybindings:n}=N.commands[i];e.addAction({id:i,label:t,keybindings:null==n?void 0:n({KeyMod:C.KeyMod,KeyCode:C.KeyCode}),run:()=>N.commands[i].callback()})}e.addAction({id:"character-counter",label:"Character Counter",run:()=>T(e=>!e)}),e.setModel(G(w))}};return(0,d.useEffect)(()=>{(n||(n=(async()=>{if(!q.y){let e=document.createElement("link");e.dataset.info="nextjs-head-issue-workaround",document.head.appendChild(e)}o._m.config({paths:{vs:"https://wokwi.com/cdn/monaco-editor/0.39.0/vs"}});let e=await o._m.init(),{registerArduinoLanguage:t,registerAVRAssemblyLanguage:n,registerAVRListingLanguage:r}=await Promise.all([i.e(8639),i.e(3530)]).then(i.bind(i,33530));return t(e),n(e),r(e),function(e){e.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:"https://wokwi.com/schemas/diagram-v1.json",fileMatch:["diagram.json"],schema:V}]})}(e),e})()),n).then(S)},[]),(0,d.useEffect)(()=>{let e=k.current;if(k.current=w,_&&C){var i,n;e&&t.includes(e)&&(null===(n=e.setEditorState)||void 0===n||n.call(e,{model:_.getModel(),viewState:_.saveViewState()}));let r=w.editorState;if(null==r?void 0:r.model){_.setModel(r.model);let e=_.getValue(),t=w.content;e!==t&&_.setValue(t),r.model=null}else _.setModel(G(w));(null==r?void 0:r.viewState)&&_.restoreViewState(r.viewState),_.updateOptions({tabSize:w.name.endsWith(".py")?4:2,readOnly:w.readonly||w.name===m.rp}),(null===(i=w.debugger)||void 0===i?void 0:i.activeLine)&&_.revealLineInCenter(w.debugger.activeLine),!A.current&&(!N.embedMode||document.hasFocus())&&(setTimeout(()=>_.focus(),0),A.current=!0)}},[_,w,G,C,t,N.embedMode]),(0,d.useEffect)(()=>(0,a.EH)(()=>{if(!_)return;let e=_.getModel();e&&w.content!==e.getValue()&&(_.pushUndoStop(),_.executeEdits("",[{range:e.getFullModelRange(),text:w.content}]),_.pushUndoStop())}),[w,_]),(0,d.useEffect)(()=>{if(null!=y){let e=t.find(e=>e.name===y);e&&(null==_||_.focus(),j(e)),Z(null)}},[_,y,t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x.mQ,{children:[t.map(e=>{var t;return(0,r.jsx)(x.OK,{onMouseDown:e=>e.preventDefault(),onClick:()=>j(e),active:e===w,readonly:e.readonly,modified:e.modified,errors:null===(t=e.errors)||void 0===t?void 0:t.some(e=>"error"===e.type),children:e.name},e.name)}),(0,r.jsx)(x.BX,{onClick:()=>F(!W),active:W,ref:P})]}),R&&(0,r.jsxs)("div",{children:["Characters: ",w.content.length]}),(0,r.jsx)(O,{activeFile:w.name,open:W,onClose:()=>F(!1),onFileCreated:e=>{Z(e)},anchorEl:P.current}),w.customComponent,(0,r.jsxs)("div",{className:(0,l.default)(f().editorContainer,{[f().disableAutocomplete]:L,dark:B.dark}),style:{display:w.customComponent?"none":""},ref:z,children:[!C&&(0,r.jsx)("pre",{className:(0,l.default)(f().sourceCodePreview,B.dark&&f().sourceCodePreviewDark),children:(0,r.jsx)("code",{children:w.content})}),C&&(0,r.jsx)(o.ZP,{onMount:I,wrapperProps:{className:f().wrapper},theme:function(e,t){let i=(0,p.PE)(e)||e===m.rp?"arduino":"vs";return t?"".concat(i,"-dark"):i}(w.name,B.dark),options:{glyphMargin:!0,scrollBeyondLastLine:!N.embedMode,fontSize:B.font,minimap:{enabled:!1}}})]})]})})},95944:function(e,t,i){"use strict";i.d(t,{y:function(){return a}});var n=i(85893),r=i(99226),o=i(81458),l=i(15861);function a(e){var t;let i=Math.round(null!==(t=e.value)&&void 0!==t?t:0);return(0,n.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(r.Z,{sx:{width:"100%",mr:1},children:(0,n.jsx)(o.Z,{variant:"determinate",...e})}),(0,n.jsx)(r.Z,{sx:{minWidth:35},children:(0,n.jsx)(l.Z,{variant:"body2",color:"text.secondary",children:"".concat(i,"%")})})]})}},64178:function(e,t,i){"use strict";i.d(t,{u:function(){return to}});var n=i(85893),r=i(55317),o=i(8849),l=i.n(o),a=i(10389),s=i(59130),d=i(72428),c=i(41073),u=i(34685),h=i(89022),p=i(99226),m=i(34386),x=i(58032),g=i(14564),f=i(47036),j=i(13486),v=i(6949),w=i(20025),b=i(86010),k=i(46670),y=i(5152),Z=i.n(y),C=i(67294),S=i(16264),_=i(25854),D=i(2656),M=i(19469),E=i(98291),N=i(54619),W=i(85940),F=i(2363),z=i(53113),P=i(75766),R=i(15861),T=i(11057);class B extends C.Component{static getDerivedStateFromError(){return{hasError:!0}}render(){return this.state.hasError?(0,n.jsxs)(p.Z,{px:1,pt:8,style:{background:"black",color:"white",height:"100%"},children:[(0,n.jsx)(R.Z,{variant:"h3",children:"Error in diagram.json"}),(0,n.jsx)("p",{children:"Please fix the error and click Retry:"}),(0,n.jsx)(T.Z,{onClick:()=>this.setState({hasError:!1}),color:"secondary",children:"Retry"})]}):this.props.children}constructor(...e){super(...e),(0,P._)(this,"state",{hasError:!1})}}var L=i(83624),A=i(10417),H=i(83680),G=i(12215),I=i(85591),K=i(11296),U=i(88600),O=i(40404),V=i(17575),q=i(65301),Y=i(84118),$=i(18972),Q=i(48885),J=i(59334),X=i(67720),ee=i(21397),et=i(12906),ei=i(48913),en=i(48053);let er=(0,k.Pi)(e=>{let{onClose:t}=e,i=(0,C.useContext)(z.A),r=(0,C.useContext)(en.D),o=(0,ei.P)(),l=(0,C.useContext)(ee.St),{fullScreen:a}=i,{translate:s}=(0,_.q)("diagram.menu"),{diagram:d}=o,c=d&&d.undoManager.canUndo,u=d&&d.undoManager.canRedo,h=(0,et.p)(),p="avr"===o.architecture;return(0,n.jsxs)(Y.Z,{children:[(0,n.jsxs)($.Z,{disabled:!p,onClick:()=>{var e,i;r.start({debug:!0,debugger:!0,diagram:o.diagram,files:o.files,chips:o.chips,binaryFiles:o.binaryFiles,sdCardFiles:o.sdCardFiles,projectId:o.id,userId:l.id}),(0,M.c)("debugger:start",{mcu:null===(e=null===(i=o.diagram)||void 0===i?void 0:i.findMCU())||void 0===e?void 0:e.type}),t()},children:[(0,n.jsx)(Q.Z,{children:(0,n.jsx)(L.Z,{})}),(0,n.jsx)(J.Z,{children:s("debug","Debug (beta)")})]}),(0,n.jsx)(X.Z,{}),(0,n.jsxs)($.Z,{disabled:!c,onClick:()=>{null==d||d.undoManager.undo(),o.syncDiagram()},children:[(0,n.jsx)(Q.Z,{children:(0,n.jsx)(A.Z,{fontSize:"small"})}),(0,n.jsx)(J.Z,{children:s("undo","Undo")}),(0,n.jsxs)(R.Z,{variant:"body2",color:"text.secondary",children:[h,"-Z"]})]}),(0,n.jsxs)($.Z,{disabled:!u,onClick:()=>{null==d||d.undoManager.redo(),o.syncDiagram()},children:[(0,n.jsx)(Q.Z,{children:(0,n.jsx)(H.Z,{fontSize:"small"})}),(0,n.jsx)(J.Z,{children:s("redo","Redo")}),(0,n.jsxs)(R.Z,{variant:"body2",color:"text.secondary",children:[h,"-Y"]})]}),(0,n.jsx)(X.Z,{}),(0,n.jsxs)($.Z,{onClick:()=>i.fit(),children:[(0,n.jsx)(Q.Z,{children:(0,n.jsx)(G.Z,{fontSize:"small"})}),(0,n.jsx)(J.Z,{children:s("fit","Fit")}),(0,n.jsx)(R.Z,{variant:"body2",color:"text.secondary",children:"F"})]}),(0,n.jsxs)($.Z,{onClick:()=>i.zoom(1.1),children:[(0,n.jsx)(Q.Z,{children:(0,n.jsx)(I.Z,{})}),(0,n.jsx)(J.Z,{children:s("zoomIn","Zoom in")}),(0,n.jsx)(R.Z,{variant:"body2",color:"text.secondary",children:"+"})]}),(0,n.jsxs)($.Z,{onClick:()=>i.zoom(.9),children:[(0,n.jsx)(Q.Z,{children:(0,n.jsx)(K.Z,{})}),(0,n.jsx)(J.Z,{children:s("zoomOut","Zoom out")}),(0,n.jsx)(R.Z,{variant:"body2",color:"text.secondary",children:"–"})]}),(0,n.jsx)(X.Z,{}),(0,n.jsxs)($.Z,{onClick:()=>i.toggleGrid(),children:[(0,n.jsx)(Q.Z,{children:(0,n.jsx)(U.Z,{fontSize:"small"})}),(0,n.jsx)(J.Z,{children:s("toggleGrid","Toggle Grid")}),(0,n.jsx)(R.Z,{variant:"body2",color:"text.secondary",children:"G"})]}),(0,n.jsxs)($.Z,{onClick:()=>i.toggleFullScreen(),children:[(0,n.jsx)(Q.Z,{children:a?(0,n.jsx)(O.Z,{fontSize:"small"}):(0,n.jsx)(V.Z,{fontSize:"small"})}),(0,n.jsx)(J.Z,{children:a?s("exitFullScreen","Exit full screen"):s("fullScreen","Full screen")}),(0,n.jsx)(R.Z,{variant:"body2",color:"text.secondary",sx:{marginLeft:2},children:"Alt-Enter"})]}),(0,n.jsxs)($.Z,{onClick:()=>window.open("https://docs.wokwi.com/guides/diagram-editor"),children:[(0,n.jsx)(Q.Z,{children:(0,n.jsx)(q.Z,{fontSize:"small"})}),(0,n.jsx)(J.Z,{children:s("help","Help")}),(0,n.jsx)(R.Z,{variant:"body2",color:"text.secondary",children:"?"})]})]})});var eo=i(96506),el=i(42293),ea=i(79332),es=i(87109),ed=i(75438),ec=i(18987),eu=i(69661),eh=i(99028),ep=i(75195),em=i(2853);function ex(){let e=(0,ei.P)(),t=(0,C.useRef)(null),i=(0,C.useRef)(null),r=(0,C.useContext)(z.A),[o,l]=(0,C.useState)(""),{translate:a}=(0,_.q)("diagram.addPart"),s=e=>e.variant?"".concat(e.type,"-").concat(e.variant):e.type,d="logic".startsWith(o.toLowerCase())&&o.length>0,c=em.s0.map(e=>"Logic"===e.title&&d?e:{title:e.title,items:e.items.filter(e=>a(s(e),e.label).toLowerCase().includes(o.toLowerCase()))}).filter(e=>e.items.length>0),u=t=>{let i;let n=r.diagramSafeVisibleArea,o=e.diagram;if(o&&n){let e={x:n.left+10,y:n.top+10};for(;o.parts.find(t=>2>Math.abs(t.left-e.x)&&2>Math.abs(t.top-e.y));)e.x+=15,e.y+=15;let t=n&&(0,ep.MU)(n);i={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y)}}if(o){var l;o.addPartFromTemplate({type:t.type,prefix:t.prefix,attrs:null!==(l=t.attrs)&&void 0!==l?l:[]},i),e.syncDiagram()}};return(0,n.jsxs)(p.Z,{minWidth:"350px",sx:{padding:2},children:[(0,n.jsx)(el.Z,{position:"sticky",onFocus:()=>{var e;return null===(e=t.current)||void 0===e?void 0:e.focus()},children:(0,n.jsx)(ea.Z,{autoFocus:!0,ref:t,value:o,onChange:e=>l(e.target.value),onClick:e=>e.stopPropagation(),sx:{width:"100%"},onKeyDown:e=>{var t,n;if("Enter"===e.key){let i=null===(t=c[0])||void 0===t?void 0:t.items[0];i&&(u(i),e.preventDefault())}else("ArrowDown"===e.key||"ArrowUp"===e.key)&&(null===(n=i.current)||void 0===n||n.dispatchEvent(new KeyboardEvent(e.type,e.nativeEvent)),e.preventDefault())},endAdornment:(0,n.jsx)(es.Z,{position:"end",children:(0,n.jsx)(eo.Z,{})})})}),(0,n.jsx)(Y.Z,{ref:i,children:c.map(e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ed.Z,{sx:{top:"27px"},children:a("category."+(0,eh.z)(e.title),e.title)}),e.items.map(e=>(0,n.jsxs)($.Z,{onClick:()=>u(e),children:[(0,n.jsx)(ec.Z,{children:(0,n.jsx)(eu.Z,{alt:"Avatar ".concat(s(e)),src:e.photo,sx:{width:50,height:50},variant:"square"})}),(0,n.jsx)(J.Z,{primary:a(s(e),e.label)})]},s(e)))]}))})]})}var eg=i(90948),ef=i(11703),ej=i(40044),ev=i(78462),ew=i(70891);function eb(){return(0,n.jsxs)(R.Z,{sx:{"text-align":"center",background:"#333",color:"white",py:.5},children:["The debugger is currently in ",(0,n.jsx)("strong",{children:"beta"}),". Please report any issues"," ",(0,n.jsx)("a",{href:"https://github.com/wokwi/wokwi-features/issues/205",target:"_blank",rel:"noreferrer",style:{color:"#aaf"},children:"here"}),"."]})}let ek=(0,k.Pi)(()=>{let{debuggerStore:e}=(0,C.useContext)(en.D);return(0,n.jsxs)(p.Z,{sx:{background:"black",color:"white",width:"100%",display:"flex",flexDirection:"column"},children:[(0,n.jsx)(ev.Z,{dense:!0,sx:{overflow:"auto",flex:1},children:e.callstack.map((e,t)=>(0,n.jsx)(ew.ZP,{children:(0,n.jsx)(J.Z,{primary:"#".concat(t," ").concat(e.function,"()"),secondary:"".concat(function(e){if(!e)return"unknown file";if(e.includes(".arduino15/packages/arduino/hardware/avr")){let t=e.indexOf("/cores/arduino/");if(t>=0)return e.substring(t+1)}let t=e.split("/");return t[t.length-1]}(e.file),":").concat(e.line)})},t))}),(0,n.jsx)(eb,{})]})}),ey=(0,k.Pi)(()=>{let{debuggerStore:e}=(0,C.useContext)(en.D),t=e.locals.length>0,i=e.globals.length>0;return(0,n.jsxs)(p.Z,{sx:{background:"black",color:"white",width:"100%",display:"flex",flexDirection:"column"},children:[(0,n.jsxs)(ev.Z,{sx:{overflow:"auto","& ul":{padding:0}},subheader:(0,n.jsx)("li",{}),dense:!0,children:[t&&(0,n.jsx)(ed.Z,{children:"Locals"}),e.locals.map((e,t)=>(0,n.jsx)(ew.ZP,{children:(0,n.jsx)(J.Z,{primary:"".concat(e.type," ").concat(e.name," = ").concat(e.value)})},t)),i&&(0,n.jsx)(ed.Z,{children:"Globals"}),e.globals.map((e,t)=>(0,n.jsx)(ew.ZP,{children:(0,n.jsx)(J.Z,{primary:"".concat(e.type," ").concat(e.name," = ").concat(e.value)})},t)),!t&&!i&&(0,n.jsx)(ed.Z,{children:"No variables"})]}),(0,n.jsx)(eb,{})]})});var eZ=i(13264),eC=i(61193);let eS=(0,eZ.Z)("div")(e=>{let{theme:t}=e;return{position:"relative",height:1,cursor:"row-resize",backgroundColor:"rgba(120, 120, 120, 0.3)","&:before":{display:"block",content:'" "',position:"absolute",top:-5,width:"100%",height:"10px"},"&:after":{display:"block",content:'" "',position:"absolute",backgroundColor:t.palette.primary.light,top:-2,width:"100%",height:4,opacity:0},"&.dragging:after, &:hover:after":{opacity:1,transition:"opacity"}}});function e_(e){let{children:t,initialSize:i,constrain:r}=e,[o,l]=(0,C.useState)(!1),[a,s]=(0,C.useState)(i),d=(e,t)=>{s(e=>e-t.deltaY)},c=r?r(a):a;return(0,n.jsxs)(p.Z,{display:"flex",flexDirection:"column",minHeight:c,flexBasis:c,children:[(0,n.jsx)(eC.DraggableCore,{onStart:()=>l(!0),onDrag:d,onStop:()=>l(!1),children:(0,n.jsx)(eS,{className:o?"dragging":""})}),t]})}var eD=i(8240),eM=i(99773),eE=i.n(eM),eN=i(87018),eW=i.n(eN);let eF=[{strokeStyle:{g:255},lineWidth:4},{strokeStyle:{g:165,r:255},lineWidth:4},{strokeStyle:{r:255,b:255},lineWidth:4},{strokeStyle:{g:255,b:255},lineWidth:4},{strokeStyle:{g:255,r:255},lineWidth:4},{strokeStyle:{g:255,r:255,b:255},lineWidth:4}];function ez(e){var t;return{data:new eM.TimeSeries({}),...null!==(t=eF[e])&&void 0!==t?t:{}}}function eP(e){let{lines:t}=e,[i,r]=(0,C.useState)([ez(0)]),[o,l]=(0,C.useState)([]),[a,s]=(0,C.useState)(0),d=t.length;(0,C.useEffect)(()=>{let e=d>=a?a:0;for(let n=e;n<d;n++)!function(e){let t=e.split(/[, \t]+/);if(!t.length)return;let n=0,a=0,s=i,d=o;for(let e of t){let{label:t,value:i}=function(e){if(e.includes(":")){let t=e.split(":"),i=parseFloat(t[1]);return{label:t[0],value:i}}{let t=parseFloat(e);return isNaN(t)&&t?{label:e,value:t}:{value:t}}}(e);!isNaN(i)&&n<16&&(s[n]||(s=[...s,ez(n)]),s[n].data.append(new Date().getTime(),i),n++),t&&((d=[...d])[a]=t,a++)}s!==i&&r(s),d!==o&&l(d)}(t[n]);s(d)},[a,t,i,d,o]);let c=e=>{var t;let{display:i,time:r,data:l}=e;return i?(0,n.jsxs)("div",{className:eW().tooltip,children:[(0,n.jsx)("strong",{children:new Date(r||0).toLocaleTimeString()}),l?(0,n.jsx)("ul",{children:l.map((e,i)=>(0,n.jsxs)("li",{style:{color:e.series.options.strokeStyle},children:[null!==(t=o[i])&&void 0!==t?t:1+i,": ",e.value]},i))}):(0,n.jsx)("div",{})]}):(0,n.jsx)("div",{})};return(0,n.jsx)(eE(),{responsive:!0,nonRealtimeData:!0,tooltip:c,containerStyle:{flex:1,position:"relative"},style:{height:"0",minHeight:"100%",width:"100%"},series:i})}var eR=i(8107),eT=i.n(eR);let eB=(0,C.forwardRef)(function(e,t){let{onInput:r,onLoaded:o,style:l,className:a}=e,[s,d]=(0,C.useState)(),c=(0,C.useRef)(null),u=(0,C.useRef)(),h=(0,C.useRef)(o);return h.current=o,(0,C.useImperativeHandle)(t,()=>({write(e){null==s||s.write(new Uint8Array([e]))},writeln(e){null==s||s.writeln(e)}}),[s]),(0,C.useEffect)(()=>{let e=c.current;e&&(async()=>{var t;let{FitAddon:n,Terminal:r}=await Promise.all([i.e(6142),i.e(7203)]).then(i.bind(i,97203)),o=new r;o.open(e);let l=new n;return o.loadAddon(l),u.current=l,l.fit(),d(o),null===(t=h.current)||void 0===t||t.call(h,o),()=>{o.dispose(),d(void 0)}})()},[]),(0,C.useEffect)(()=>{let e=null==s?void 0:s.onData(e=>null==r?void 0:r(e));return()=>null==e?void 0:e.dispose()},[s,r]),eT()({ref:c,onResize:e=>{if(e.height){var t;null===(t=u.current)||void 0===t||t.fit()}}}),(0,n.jsx)("div",{ref:c,className:a,style:l})});function eL(e){let{onInput:t}=e,i=(0,C.useContext)(en.D),[r,o]=(0,C.useState)(null);return(0,C.useEffect)(()=>{if(r){let e=()=>{i.serial.bytesBuffer.length&&(r.write(new Uint8Array([...i.serial.bytesBuffer])),i.serial.bytesBuffer=[])};return e(),i.serial.listener=e,()=>{i.serial.listener=void 0}}},[r,i]),(0,n.jsx)(eB,{style:{flex:1},onInput:t,onLoaded:e=>{o(e)}})}var eA=i(91026),eH=i.n(eA);function eG(e){let{lines:t,buffer:i,onInput:o,onClear:a,plotter:s,onTogglePlotter:d,terminal:c}=e,[u,h]=(0,C.useState)(!0),p=(0,C.useRef)(null),[m]=(0,C.useState)(function(){let e=(0,eD.N)().font;return e?{fontSize:e+"px"}:{}}());(0,C.useEffect)(()=>{u&&p.current&&(p.current.scrollTop=p.current.scrollHeight)},[t.length,i,u]);let x=e=>{let t=e.target;"Enter"===e.key&&t instanceof HTMLInputElement&&(null==o||o(t.value),t.value="")},g=e=>{let t=e.currentTarget,i=t.scrollHeight-t.scrollTop-t.clientHeight;i>32?h(!1):t.scrollTop>0&&i<1&&h(!0)},f=t.length,j=(0,C.useMemo)(()=>t.join("\n")+(f?"\n":""),[t,f]);return c?(0,n.jsx)(eL,{onInput:o}):(0,n.jsxs)("div",{className:eH().serialMonitor,children:[s?(0,n.jsx)("div",{className:eH().plotterContainer,children:(0,n.jsx)(eP,{lines:t})}):(0,n.jsx)("div",{className:eH().monitorContainer,children:(0,n.jsxs)("pre",{className:"notranslate",onScroll:g,style:m,ref:p,children:[j,i]})}),(0,n.jsxs)("div",{className:eH().serialControls,children:[(0,n.jsx)("input",{className:eH().serialInput,onKeyPress:x}),(0,n.jsx)("button",{title:"Serial plotter",onClick:d,className:(0,b.default)({[eH().active]:s}),children:(0,n.jsx)(l(),{path:r.Cst,size:1})}),(0,n.jsx)("button",{onClick:()=>h(!u),title:"Auto scroll",children:(0,n.jsx)(l(),{path:u?r.Wa1:r._86,size:1})}),(0,n.jsx)("button",{onClick:()=>null==a?void 0:a(),children:(0,n.jsx)(l(),{path:r.QGK,size:1})})]})]})}let eI=(0,eg.ZP)(ef.Z)({height:"32px",minHeight:"32px"}),eK=(0,eg.ZP)(ej.Z)(e=>{let{}=e;return{height:36,minHeight:36}});function eU(e){let{children:t,value:i,index:r}=e;return(0,n.jsx)(p.Z,{id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r),role:"tabpanel",sx:{flex:1,height:0,display:i==r?"flex":"none",flexDirection:"columnn"},children:t})}let eO=(0,k.Pi)(e=>{let{diagram:t}=e,[i,r]=(0,C.useState)(0),o=(0,C.useContext)(en.D),l=(e,t)=>{r(t)},a=o.serial.terminalMode?e=>Math.max(1+17*Math.round(e/17),103):e=>Math.max(e,100),s=o.serial.terminalMode?"":t.serialLineEnding,d=o.paused&&o.debuggerEnabled,c=[];if(d&&(c.push({title:"Call Stack",content:(0,n.jsx)(ek,{})}),c.push({title:"Variables",content:(0,n.jsx)(ey,{})})),o.serial.show&&c.push({title:"Serial Monitor",content:(0,n.jsx)(eG,{lines:o.serial.lines,buffer:o.serial.textBuffer,plotter:o.serial.showPlotter,terminal:o.serial.terminalMode,onClear:()=>o.serial.clearSerial(),onInput:e=>o.feedSerial(e+s),onTogglePlotter:()=>o.serial.togglePlotter()})}),!c.length)return null;let u=Math.min(i,c.length-1);return(0,n.jsxs)(e_,{initialSize:200,constrain:a,children:[c.length>1&&(0,n.jsx)(eI,{value:i,onChange:l,"aria-label":"Bottom tabs",sx:{background:"black"},children:c.map((e,t)=>(0,n.jsx)(eK,{label:e.title,id:"simple-tab-".concat(t),"aria-controls":"simple-tabpanel-".concat(t)},e.title))}),c.map((e,t)=>(0,n.jsx)(eU,{value:u,index:t,children:e.content},e.title))]})});var eV=i(50657),eq=i(31425),eY=i(6514),e$=i(37645),eQ=i(68949);let eJ=(0,C.createContext)(new class{openBuildFailedDialog(e){this.showBuildFailedDialog=!0,this.buildErrorMessage=e}closeBuildFailedDialog(){this.showBuildFailedDialog=!1}openGetHelpDialog(){this.showGetHelpDialog=!0}closeGetHelpDialog(){this.showGetHelpDialog=!1}constructor(){(0,P._)(this,"showBuildFailedDialog",!1),(0,P._)(this,"buildErrorMessage",""),(0,P._)(this,"showGetHelpDialog",!1),(0,eQ.ky)(this,{},{autoBind:!0})}}),eX=(0,eZ.Z)(e$.Z)(e=>{let{theme:t}=e;return{background:"linear-gradient(180deg, ".concat(t.palette.primary.dark,", transparent)")}}),e0=(0,k.Pi)(()=>{let{translate:e}=(0,_.q)("simulator.buildFailedDialog"),t=(0,C.useContext)(eJ),i=(0,C.useContext)(ei.x),r=(0,C.useContext)(ee.St);return(0,n.jsxs)(eV.Z,{open:t.showBuildFailedDialog,onClose:t.closeBuildFailedDialog,"aria-labelledby":"form-dialog-title",maxWidth:"md",children:[(0,n.jsx)(eX,{id:"form-dialog-title",children:e("title","Build failed!")}),(0,n.jsx)(eY.Z,{children:(0,n.jsx)("pre",{children:t.buildErrorMessage})}),(0,n.jsxs)(eq.Z,{children:[(0,n.jsx)(T.Z,{color:"secondary",variant:"contained",onClick:()=>{(0,M.c)("getHelp:click",{project:null==i?void 0:i.id,owner:!!((null==i?void 0:i.owner)&&i.owner===(null==r?void 0:r.id))}),t.closeBuildFailedDialog(),t.openGetHelpDialog()},children:"Get help"}),(0,n.jsx)(T.Z,{variant:"contained",onClick:t.closeBuildFailedDialog,children:"Close"})]})]})});var e1=i(78726),e5=i(62026),e2=i(90629),e3=i(88085);let e6=(0,k.Pi)(()=>{let e=(0,C.useContext)(en.D),t=(0,C.useContext)(ee.St),i="provisioning"===t.machineId;return e.buildTime<1e3?null:(0,n.jsx)(p.Z,{children:(0,n.jsxs)(e2.Z,{children:[(0,n.jsx)(p.Z,{color:{background:"#555",color:"white"},p:1,py:.5,children:(0,n.jsxs)(e3.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,n.jsx)(R.Z,{sx:{flex:1},children:"Compiling project..."}),(0,n.jsxs)(R.Z,{color:"#ccc",children:[(0,n.jsx)(e1.Z,{sx:{verticalAlign:"top"}}),(e.buildTime/1e3).toFixed(2),"s"]}),(0,n.jsx)(T.Z,{onClick:()=>{e.abortBuild(),(0,M.c)("build:cancel",{waitTime:e.buildTime})},color:"warning",children:"Cancel"})]})}),t.machineId&&!i?(0,n.jsx)(p.Z,{p:1,children:(0,n.jsxs)(R.Z,{children:[(0,n.jsx)(e5.Z,{color:"success",sx:{verticalAlign:"bottom"}})," Wokwi Private Build Server enabled"]})}):i?(0,n.jsxs)(p.Z,{p:1,children:[(0,n.jsx)(R.Z,{gutterBottom:!0,children:"Your Private Wokwi Build Server is being provisioned and will be ready in a few minutes."}),(0,n.jsxs)(R.Z,{gutterBottom:!0,children:["For support or questions, please contact us at"," ",(0,n.jsx)("a",{href:"mailto:support@wokwi.com?subject=Private Build Server",children:"support@wokwi.com"}),"."]})]}):(0,n.jsxs)(p.Z,{p:1,children:[(0,n.jsx)(R.Z,{gutterBottom:!0,children:"While waiting, why not check out Wokwi for VS Code?"}),(0,n.jsx)(T.Z,{variant:"contained",href:"https://docs.wokwi.com/vscode/getting-started",target:"_blank",onClick:()=>{(0,M.c)("compiling:vsCodeClick",{waitTime:e.buildTime})},children:"Learn more"})]})]})})});var e9=i(93946);let e4=(0,k.Pi)(()=>{let{translate:e}=(0,_.q)("simulator.getHelpDialog"),t=(0,C.useContext)(eJ),i=(0,C.useContext)(ee.St),o=(0,C.useContext)(ei.x),a=(0,C.useRef)(null),s=e=>{var t;null===(t=a.current)||void 0===t||t.select(),document.execCommand("copy"),e.target.focus(),(0,M.c)("getHelp:copyToClipboard",{project:null==o?void 0:o.id})},d=(null==o?void 0:o.owner)&&o.owner===(null==i?void 0:i.id),c=!(null==o?void 0:o.id),u=["**Project Link:** https://wokwi.com/projects/".concat(null==o?void 0:o.id,"?gh=1"),"","Error message: ".concat(t.buildErrorMessage)].join("\n");return(0,n.jsxs)(eV.Z,{open:t.showGetHelpDialog,onClose:t.closeGetHelpDialog,"aria-labelledby":"form-dialog-title",maxWidth:"sm",children:[(0,n.jsx)(e$.Z,{id:"form-dialog-title",children:e("title","Get Help")}),(0,n.jsxs)(eY.Z,{children:[(0,n.jsxs)(R.Z,{gutterBottom:!0,children:["To get help, please join our"," ",(0,n.jsx)("a",{href:"https://wokwi.com/discord",target:"_blank",rel:"noopener noreferrer",children:"Discord Community Chat"}),", and ask for help in the ",(0,n.jsx)("b",{children:"#questions"})," channel."]}),c||!d&&o.modified?(0,n.jsxs)(R.Z,{gutterBottom:!0,children:["Important: make sure to ",(0,n.jsx)("b",{children:"save"})," the project first, and ",(0,n.jsx)("b",{children:"share the project link"})," ","along with your question."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(R.Z,{gutterBottom:!0,children:["Include the following information:",(0,n.jsx)(m.Z,{title:e("copyToClipboard","Copy to clipboard"),children:(0,n.jsx)(e9.Z,{onClick:s,sx:{verticalAlign:"sub"},children:(0,n.jsx)(l(),{path:r._U3,size:1})})})]}),(0,n.jsx)("textarea",{style:{width:"100%",background:"#ccc"},readOnly:!0,value:u,rows:8,ref:a,onClick:()=>{var e;return null===(e=a.current)||void 0===e?void 0:e.select()}}),o.modified&&(0,n.jsxs)(R.Z,{children:["Important: make sure to ",(0,n.jsx)("b",{children:"save"})," your project first!"]})]})]}),(0,n.jsx)(eq.Z,{children:(0,n.jsx)(T.Z,{variant:"contained",onClick:t.closeGetHelpDialog,children:"Close"})})]})});var e8=i(95944);let e7=(0,k.Pi)(()=>{let{translate:e}=(0,_.q)("simulator.downloadingDataDialog"),t=(0,C.useContext)(en.D),i=(0,ei.P)(),r=0,o=0;for(let e of i.sdCardFiles)r+=e.size,o=e.downloading?e.progress*e.size:e.size;r||(r=1,o=1);let l=o/r*100;return(0,n.jsxs)(eV.Z,{open:t.showSDCardDownload,onClose:()=>t.skipSDCardDownload(),"aria-labelledby":"form-dialog-title",maxWidth:"md",children:[(0,n.jsx)(e$.Z,{id:"form-dialog-title",children:e("title","Downloading SD Card Data...")}),(0,n.jsx)(eY.Z,{children:(0,n.jsx)(e8.y,{value:l})}),(0,n.jsx)(eq.Z,{children:(0,n.jsx)(T.Z,{variant:"contained",onClick:()=>t.skipSDCardDownload(),children:"Skip"})})]})});var te=i(73033);function tt(e){let{src:t}=e,i=(0,C.useContext)(en.D),[r,o]=(0,C.useState)(!1),l=(0,C.useRef)(null),[a,s]=(0,C.useState)(null);return(0,C.useEffect)(()=>(0,eQ.EH)(()=>{let e=i.lastUpdate;if(r&&Object.keys(e).length){var t,n;null===(t=a||(null===(n=l.current)||void 0===n?void 0:n.contentWindow))||void 0===t||t.postMessage({$nanos:i.lastUpdateNanos,...(0,eQ.ZN)(e)},"*")}})),(0,te.m)("message",e=>{let t=e.data;if((null==t?void 0:t.app)==="wokwi"&&"listen"===t.command){var i;o(!0),(null===(i=e.source)||void 0===i?void 0:i.postMessage)&&s(e.source)}}),(0,n.jsx)("iframe",{ref:l,src:t,style:{border:"none",flex:"1"},allow:"fullscreen; microphone; midi; usb; autoplay; camera; accelerometer"})}var ti=i(22345),tn=i.n(ti);let tr=Z()(()=>i.e(7530).then(i.bind(i,67530)),{loadableGenerated:{webpack:()=>[67530]}}),to=(0,k.Pi)(e=>{let{diagram:t,files:i,className:o,disableEdit:k}=e,y=(0,C.useContext)(W.r),Z=(0,C.useContext)(en.D),[P,R]=(0,C.useState)(!1),T=(0,C.useRef)(null),[L,A]=(0,C.useState)(!1),H=(0,C.useRef)(null),G=(0,ei.P)(),I=(0,S.a)(),K=(0,D.A)(),U=(0,C.useContext)(z.A),O=(0,C.useContext)(eJ),{translate:V}=(0,_.q)("simulator.main"),q=(0,C.useCallback)(()=>G.syncDiagram(),[G]);Z.onBuildFailure=e=>{var t,n,r;let o=null!==(r=null===(t=i.find(e=>"sketch"===(0,N.r5)(e.name)))||void 0===t?void 0:t.name)&&void 0!==r?r:"sketch.ino";(0,M.L)({category:"build",action:"build_failure"}),(0,M.c)("build:failure",{project:G.id,modified:G.modified}),null===(n=y.goToError)||void 0===n||n.call(y),O.openBuildFailedDialog((0,E.GS)(e,o))};let Y={background:f.Z[600],color:"white","&:hover":{background:f.Z[700]}},$=()=>{let e=Z.running;Z.start({files:i,chips:G.chips,binaryFiles:G.binaryFiles,diagram:t,sdCardFiles:G.sdCardFiles,projectId:G.id,tempProjectId:G.tempId,userId:I.id,machineId:I.machineId,debugger:e&&Z.debuggerEnabled})},Q=()=>Z.stop(),J=()=>{Z.paused?Z.resume():Z.pause()},X=e=>{e.altKey&&"Enter"===e.key&&U.toggleFullScreen()},ee=Z.running?V("restart","Restart the simulation"):V("start","Start the simulation"),et=Z.paused?V("resume","Resume"):V("pause","Pause");return(0,n.jsxs)("div",{className:(0,b.default)(tn().container,{[tn().darkMode]:K.dark,[tn().fullscreen]:U.fullScreen},o),onKeyDown:X,children:[(0,n.jsx)(e7,{}),(0,n.jsx)(e0,{}),(0,n.jsx)(e4,{}),(0,n.jsxs)("div",{className:tn().simulationControls,children:[(0,n.jsx)(p.Z,{m:1,children:(0,n.jsx)(m.Z,{title:ee,children:(0,n.jsx)(x.Z,{onClick:$,"aria-label":ee,size:"small",sx:{backgroundColor:j.Z[600],color:"white","&:hover":{backgroundColor:j.Z[700]}},children:Z.running?(0,n.jsx)(a.Z,{}):(0,n.jsx)(s.Z,{})})})}),(0,n.jsxs)(p.Z,{my:1,mr:1,children:[!Z.running&&!Z.building&&!k&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.Z,{title:V("addNewPart","Add a new part"),children:(0,n.jsx)(x.Z,{ref:T,onClick:()=>R(e=>!e),"aria-label":V("addNewPart","Add a new part"),size:"small",sx:{background:v.Z[800],color:"white","&:hover":{background:v.Z[900]}},children:(0,n.jsx)(d.Z,{})})}),(0,n.jsx)(g.ZP,{open:P,anchorEl:T.current,onClose:()=>R(!1),onClick:()=>R(!1),onKeyDown:e=>{"Enter"===e.key&&(R(!1),e.stopPropagation())},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,n.jsx)(ex,{})})]}),Z.building&&(0,n.jsx)(l(),{path:r.CEZ,size:.8,spin:!0}),Z.building&&(0,n.jsx)(e6,{}),Z.running&&(0,n.jsx)(m.Z,{title:V("stopSimulation","Stop the simulation"),children:(0,n.jsx)(x.Z,{onClick:Q,"aria-label":V("stopSimulation","Stop the simulation"),sx:Y,size:"small",children:(0,n.jsx)(c.Z,{})})})]}),!Z.running&&!Z.building&&!k&&(0,n.jsxs)(p.Z,{my:1,mr:1,children:[(0,n.jsx)(m.Z,{title:V("zoomGridTooltip","Zoom, Grid, and more"),children:(0,n.jsx)(x.Z,{ref:H,onClick:()=>A(e=>!e),"aria-label":V("zoomGridTooltip","Zoom, grid, and more"),sx:Y,size:"small",children:(0,n.jsx)(u.Z,{})})}),(0,n.jsx)(g.ZP,{open:L,anchorEl:H.current,onClose:()=>A(!1),anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,n.jsx)(er,{onClose:()=>A(!1)})})]}),Z.running&&(0,n.jsx)(p.Z,{my:1,mr:1,children:(0,n.jsx)(m.Z,{title:et,children:(0,n.jsx)(x.Z,{onClick:J,"aria-label":et,size:"small",sx:Z.paused?{background:w.Z[500],color:"#333","&:hover":{background:w.Z[600]}}:Y,children:Z.paused?(0,n.jsx)(s.Z,{}):(0,n.jsx)(h.Z,{})})})})]}),Z.running&&(0,n.jsxs)("span",{className:tn().simulationStatus,children:[(0,n.jsx)(l(),{path:r.clR,size:1}),(0,n.jsx)("span",{className:tn().timeText,ref:e=>{Z.timeElement=e}}),(0,n.jsx)(l(),{path:r.YLv,size:1}),(0,n.jsx)("span",{className:tn().speedText,ref:e=>{Z.speedElement=e}})]}),t.customView?(0,n.jsx)(tt,{src:t.customView}):(0,n.jsx)(B,{children:(0,n.jsx)(F.Z,{diagram:t,editMode:!Z.running&&!k,onDiagramUpdated:q,marginTop:56})}),(0,n.jsx)(eO,{diagram:t}),t.ercEnabled&&!Z.running&&(0,n.jsx)("div",{className:tn().ercBox,children:(0,n.jsx)("div",{children:(0,n.jsx)(tr,{})})})]})})},16765:function(e,t,i){"use strict";i.d(t,{BX:function(){return u},OK:function(){return h},mQ:function(){return p}});var n=i(85893),r=i(55317),o=i(8849),l=i.n(o),a=i(86010),s=i(67294),d=i(92959),c=i.n(d);let u=(0,s.forwardRef)((e,t)=>{let{active:i,...o}=e;return(0,n.jsx)("button",{...o,className:(0,a.default)(c().dropdown,i&&c().active),ref:t,children:(0,n.jsx)(l(),{path:r.iW9,size:"20px"})})});function h(e){let{children:t,active:i,modified:r,errors:o,readonly:l,...s}=e;return(0,n.jsx)("button",{...s,className:(0,a.default)(c().tab,{[c().active]:i,[c().modified]:r,[c().errors]:o,[c().readonly]:l}),children:t})}function p(e){let{children:t}=e;return(0,n.jsx)("div",{className:c().tabs,children:t})}u.displayName="DropdownTab"},73033:function(e,t,i){"use strict";i.d(t,{m:function(){return r}});var n=i(67294);function r(e,t){(0,n.useEffect)(()=>(window.addEventListener(e,t),()=>window.removeEventListener(e,t)),[e,t])}},99028:function(e,t,i){"use strict";function n(e){return e.split(" ").map((e,t)=>0===t?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join("")}function r(e){return e.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}i.d(t,{L:function(){return r},z:function(){return n}})},40815:function(e){e.exports={wrapper:"code-editor_wrapper__AEiSo",sourceCodePreview:"code-editor_sourceCodePreview__EdZbN",dark:"code-editor_dark__CWET3",editorContainer:"code-editor_editorContainer__Rr_BW",disableAutocomplete:"code-editor_disableAutocomplete__YWoh3"}},61725:function(e){e.exports={breakpoint:"editor-breakpoints_breakpoint__fpIFO",stackframe:"editor-breakpoints_stackframe__RLFHW",hint:"editor-breakpoints_hint__6k0WP",stackframeLine:"editor-breakpoints_stackframeLine__izOAE"}},91026:function(e){e.exports={serialMonitor:"serial-monitor_serialMonitor__RdKZu",monitorContainer:"serial-monitor_monitorContainer__gCtjW",plotterContainer:"serial-monitor_plotterContainer__f7pEp",serialControls:"serial-monitor_serialControls__KSZx8",active:"serial-monitor_active__zff4A"}},87018:function(e){e.exports={tooltip:"serial-plotter_tooltip__DIqtJ"}},22345:function(e){e.exports={container:"simulation_container__dtl5x",darkMode:"simulation_darkMode__E_zZk",fullscreen:"simulation_fullscreen__ggcYt",simulationControls:"simulation_simulationControls__ludWG",timeText:"simulation_timeText__xmxMn",speedText:"simulation_speedText__lUUIl",simulationStatus:"simulation_simulationStatus__0E79Q",ercBox:"simulation_ercBox__DObiL"}},92959:function(e){e.exports={tabs:"tabs_tabs__ztOIk",tab:"tabs_tab__iRWK_",active:"tabs_active___gU2D",modified:"tabs_modified__tU9Lp",errors:"tabs_errors__OLBf0",readonly:"tabs_readonly__GBHlJ",dropdown:"tabs_dropdown__xOoyW"}}}]);